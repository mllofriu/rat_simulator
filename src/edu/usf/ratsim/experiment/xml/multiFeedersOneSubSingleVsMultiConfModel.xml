<?xml version="1.0" encoding="us-ascii"?>
<!-- Just a test of new format -->

<experiment>
	<!--Robot startin points -->
	<point>
		<name>W</name>
		<xp>-0.4</xp>
		<yp>0</yp>
		<zp>0</zp>
		<rot>0</rot>
	</point>
	<point>
		<name>N</name>
		<xp>0</xp>
		<yp>0</yp>
		<zp>-0.4</zp>
		<rot>0</rot>
	</point>
	<point>
		<name>E</name>
		<xp>0.4</xp>
		<yp>0</yp>
		<zp>0</zp>
		<rot>0</rot>
	</point>
	<point>
		<name>S</name>
		<xp>0</xp>
		<yp>0</yp>
		<zp>0.35</zp>
		<rot>0</rot>
	</point>
	<!--Hidden platform points -->
	<point>
		<name>SE</name>
		<xp>0.2</xp>
		<yp>0</yp>
		<zp>0.2</zp>
		<rot>0</rot>
	</point>
	<point>
		<name>SW</name>
		<xp>-0.2</xp>
		<yp>0</yp>
		<zp>0.2</zp>
		<rot>0</rot>
	</point>
	<point>
		<name>NE</name>
		<xp>0.2</xp>
		<yp>0</yp>
		<zp>-0.2</zp>
		<rot>0</rot>
	</point>
	<point>
		<name>NW</name>
		<xp>-0.2</xp>
		<yp>0</yp>
		<zp>-0.2</zp>
		<rot>0</rot>
	</point>

	<maze>/edu/usf/ratsim/experiment/mazes/multiFeeders.xml</maze>

	<!--Subject groups -->
	<group>
		<name>One Layer</name>
		<numMembers>1</numMembers>
		<model>
			<name>ConfigurableModel</name>
			<modules>
				<module>
					<type>IPCLayer</type>
					<name>BeforeAPCL1</name>
					<params>
						<radius>.05</radius>
						<numIntentions>8</numIntentions>
					</params>
				</module>
				<module>
					<type>SingleLayerAS</type>
					<name>ASL1</name>
					<params>
					   <!-- (1 m / .05) ^ 2 * 2 * 8  -->
					   <!-- (boundingSide / radius) ^ 2 * numsublayers * numIntentions  -->
						<numStates>3200</numStates>
					</params>
				</module>
				<module>
					<type>ProportionalExplorer</type>
					<name>PE1</name>
					<params>
						<numLayers>1</numLayers>
						<maxPossibleReward>100</maxPossibleReward>
					</params>
				</module>
				<module>
					<type>TaxicFoodFinderSchema</type>
					<name>TFF1</name>
				</module>
				<module>
					<type>GoalDecider</type>
					<name>GD1</name>
				</module>
				<module>
                    <type>IPCLayer</type>
                    <name>AfterAPCL1</name>
                    <params>
                        <radius>.05</radius>
                        <numIntentions>8</numIntentions>
                    </params>
                </module>
				<module>
					<type>Reward</type>
					<name>R1</name>
					<params>
					<foodReward>100</foodReward>
					<nonFoodReward>-.001</nonFoodReward></params>
				</module>
				<module>
                    <type>HeadingAngle</type>
                    <name>HA1</name>
                    <params>
                    </params>
                </module>
				<module>
					<type>NormalQL</type>
					<name>NQL1</name>
					<params>
						<discountFactor>.95</discountFactor>
						<alpha>.8</alpha>
						<initialValue>0</initialValue>
						<numStates>3200</numStates>
					</params>
				</module>
			</modules>
			<connections>
				<connection>
					<from>
						<name>BeforeAPCL1</name>
						<variable>activation</variable>
					</from>
					<to>
						<name>ASL1</name>
						<variable>states</variable>
					</to>
				</connection>
				<connection>
					<from>
						<name>NQL1</name>
						<variable>value</variable>
					</from>
					<to>
						<name>ASL1</name>
						<variable>value</variable>
					</to>
				</connection>
				<connection>
                    <from>
                        <name>ASL1</name>
                        <variable>votes</variable>
                    </from>
                    <to>
                        <name>PE1</name>
                        <variable>votes0</variable>
                    </to>
                </connection>
				<!-- <connection>
					<from>
						<name>ASL1</name>
						<variable>votes</variable>
					</from>
					<to>
						<name>PE1</name>
						<variable>votes</variable>
					</to>
				</connection> -->
				<!-- <connection>
					<from>
						<name>GD1</name>
						<variable>goalFeeder</variable>
					</from>
					<to>
						<name>PCL1</name>
						<variable>goalFeeder</variable>
					</to>
				</connection> -->
				<connection>
                    <from>
                        <name>GD1</name>
                        <variable>goalFeeder</variable>
                    </from>
                    <to>
                        <name>TFF1</name>
                        <variable>goalFeeder</variable>
                    </to>
                </connection>
                <connection>
                    <from>
                        <name>GD1</name>
                        <variable>goalFeeder</variable>
                    </from>
                    <to>
                        <name>BeforeAPCL1</name>
                        <variable>goalFeeder</variable>
                    </to>
                </connection>
                <connection>
                    <from>
                        <name>GD1</name>
                        <variable>goalFeeder</variable>
                    </from>
                    <to>
                        <name>AfterAPCL1</name>
                        <variable>goalFeeder</variable>
                    </to>
                </connection>
                <connection>
                    <from>
                        <name>HA1</name>
                        <variable>headingAngle</variable>
                    </from>
                    <to>
                        <name>NQL1</name>
                        <variable>takenAction</variable>
                    </to>
                </connection>
				<connection>
                    <from>
                        <name>R1</name>
                        <variable>reward</variable>
                    </from>
                    <to>
                        <name>NQL1</name>
                        <variable>reward</variable>
                    </to>
                </connection>
                <connection>
                    <from>
                        <name>BeforeAPCL1</name>
                        <variable>activation</variable>
                    </from>
                    <to>
                        <name>NQL1</name>
                        <variable>statesBefore</variable>
                    </to>
                </connection>
                <connection>
                    <from>
                        <name>AfterAPCL1</name>
                        <variable>activation</variable>
                    </from>
                    <to>
                        <name>NQL1</name>
                        <variable>statesAfter</variable>
                    </to>
                </connection>
                
			</connections>
			<params>


			</params>
		</model>
		<initializers>
			<initializer>
				<name>feederSelector</name>
				<params>
					<numFeeders>3</numFeeders>
				</params>
			</initializer>
		</initializers>
	</group>

	<!-- <group>
		<name>Five Layers</name>
		<numMembers>1</numMembers>
		<model>
			<name>MultiScaleMultiIntentionModel</name>
			<params>
				<numLayers>5</numLayers>
				<minRadius>.05</minRadius>
				<maxRadius>.25</maxRadius>
				<numIntentions>8</numIntentions>
			</params>
		</model>
		<initializers>
			<initializer>
				<name>feederSelector</name>
				<params>
					<numFeeders>3</numFeeders>
				</params>
			</initializer>
		</initializers>
	</group> -->


	<!--Experiment Trials -->
	<!-- 8 training trials -->
	<trial>
		<name>training</name>
		<reps>1</reps>
		<groups>
			<group>One Layer</group>
			<!-- <group>Five Layers</group> -->
		</groups>
		<initialTasks>
			<task>
				<name>PlaceRobotInitiallyTask</name>
				<params>
					<initialPosition>S</initialPosition>
				</params>
			</task>
			<!-- <task> <name>ActivateFeeders</name> <params> </params> </task> -->
			<task>
				<name>FlashFeeder</name>
			</task>
		</initialTasks>
		<afterCycleTasks>
			<task>
				<name>FlashFeeder</name>
			</task>
			<task>
				<name>UnflashFeeder</name>
			</task>
		</afterCycleTasks>
		<afterTrialTasks>
		</afterTrialTasks>
		<stopConditions>
			<stopCondition>
				<name>FoundNFood</name>
				<params>
					<n>1000</n>
				</params>
			</stopCondition>
			<stopCondition>
				<name>Time</name>
				<params>
					<time>200000</time>
				</params>
			</stopCondition>
		</stopConditions>
		<afterCycleLoggers>
			<logger>
				<name>PositionLogger</name>
			</logger>


		</afterCycleLoggers>
		<afterTrialLoggers>
			<logger>
				<name>PolicyDumperWithIntention</name>
				<params>
					<numIntentions>8</numIntentions>
				</params>
			</logger> 
		</afterTrialLoggers>
	</trial>

	<!-- 4 testing trials -->
	<trial>
		<name>recall</name>
		<reps>1</reps>
		<groups>
			<group>One Layer</group>
			<!-- <group>Five Layers</group> -->
		</groups>
		<initialTasks>
			<task>
				<name>PlaceRobotInitiallyTask</name>
				<params>
					<initialPosition>S</initialPosition>
				</params>
			</task>
			<task>
				<name>ActivateFeeders</name>
				<params>
				</params>
			</task>

		</initialTasks>
		<afterCycleTasks>
			<task>
				<name>FeederTemporalDeactivate</name>
			</task>
		</afterCycleTasks>
		<afterTrialTasks>
		</afterTrialTasks>
		<stopConditions>
			<stopCondition>
				<name>FoundNFood</name>
				<params>
					<n>15</n>
				</params>
			</stopCondition>
			<stopCondition>
				<name>Time</name>
				<params>
					<time>200000</time>
				</params>
			</stopCondition>
		</stopConditions>
		<afterCycleLoggers>
			<logger>
				<name>PositionLogger</name>
			</logger>
		</afterCycleLoggers>
		<afterTrialLoggers>
			<logger>
				<name>PolicyDumperWithIntention</name>
				<params>
					<numIntentions>8</numIntentions>
				</params>
			</logger>
		</afterTrialLoggers>
	</trial>



</experiment>